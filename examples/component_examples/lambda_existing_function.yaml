# Existing Lambda Function (Custom Payload)
#
# This wraps an existing Lambda function that expects a specific payload format.
# No changes to the Lambda code are needed!

component_type: lambda_component.LambdaFunctionComponent

params:
  lambda_config:
    function_name: existing-s3-copy-function
    invocation_type: Event
    payload_mode: custom
    payload_config_path: "ops.s3_copy_asset.config"  # Extract just the asset config

  asset:
    key: s3_copy_asset
    description: Existing Lambda that copies S3 files
    group_name: data_transfer

    # The existing Lambda expects this exact format
    config_schema:
      source_bucket:
        type: string
      destination_bucket:
        type: string
      file_pattern:
        type: string
        default: "*.csv"

    metadata:
      owner: data-engineering
      lambda_version: legacy-v1

# The Lambda receives ONLY the asset config (not the full Dagster payload):
# {
#   "source_bucket": "...",
#   "destination_bucket": "...",
#   "file_pattern": "*.csv"
# }
