# Partitioned Lambda Asset
#
# This creates a daily partitioned asset that processes data for each day.

type: components.lambda_component.LambdaFunctionComponent

attributes:
  lambda_config:
    function_name: daily-data-processor
    invocation_type: Event
    payload_mode: full

  asset:
    key: daily_sales_data
    description: Daily sales data processed per partition
    group_name: sales

    # Daily partitions (will generate partitions from 2024-01-01 onwards)
    partitions_def: daily

    config_schema:
      data_source:
        type: string
        default: "s3://sales-data/"
      output_format:
        type: string
        default: "parquet"

    metadata:
      owner: sales-team
      partition_key_format: "%Y-%m-%d"

  # Run daily at 6 AM to process previous day's data
  schedule:
    cron_schedule: "0 6 * * *"
    execution_timezone: America/New_York
